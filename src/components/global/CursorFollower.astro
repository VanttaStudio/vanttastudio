---
/* CursorFollower.astro
   Un seguidor de cursor suave (Aura Lima) que reacciona a elementos interactivos.
*/
---

<div id="cursor-follower" class="pointer-events-none fixed left-0 top-0 z-[9999] h-8 w-8 -translate-x-1/2 -translate-y-1/2 rounded-full bg-lime-400 mix-blend-difference opacity-0 transition-opacity duration-300"></div>
<div id="cursor-aura" class="pointer-events-none fixed left-0 top-0 z-[9998] h-12 w-12 -translate-x-1/2 -translate-y-1/2 rounded-full border border-lime-400/30 opacity-0 transition-opacity duration-300"></div>

<script>
    import { gsap } from "gsap";

    function initCursor() {
        const follower = document.getElementById("cursor-follower");
        const aura = document.getElementById("cursor-aura");
        
        if (!follower || !aura) return;

        // Mostrar cursor al mover el mouse
        window.addEventListener("mousemove", (e) => {
            gsap.to(follower, {
                x: e.clientX,
                y: e.clientY,
                duration: 0.1,
                ease: "power2.out",
                opacity: 1
            });

            gsap.to(aura, {
                x: e.clientX,
                y: e.clientY,
                duration: 0.4,
                ease: "power3.out",
                opacity: 1
            });
        });

        // Efectos de Hover en elementos con [data-cursor-hover]
        const hoverElements = document.querySelectorAll('a, button, [data-cursor-hover]');
        
        hoverElements.forEach((el) => {
            el.addEventListener("mouseenter", () => {
                gsap.to(follower, {
                    scale: 2.5,
                    backgroundColor: "#a3e635", // Lime-400
                    duration: 0.3
                });
                gsap.to(aura, {
                    scale: 1.5,
                    opacity: 0,
                    duration: 0.3
                });
            });

            el.addEventListener("mouseleave", () => {
                gsap.to(follower, {
                    scale: 1,
                    backgroundColor: "#a3e635",
                    duration: 0.3
                });
                gsap.to(aura, {
                    scale: 1,
                    opacity: 1,
                    duration: 0.3
                });
            });
        });

        // Ocultar si el mouse sale de la ventana
        document.addEventListener("mouseleave", () => {
            follower.style.opacity = "0";
            aura.style.opacity = "0";
        });
    }

    // Inicializar en carga normal y en transiciones de Astro
    document.addEventListener("DOMContentLoaded", initCursor);
    document.addEventListener("astro:page-load", initCursor);
</script>

<style>
    /* Ocultar el cursor real para que el aura tome protagonismo */
    body {
        cursor: none !important;
    }
    
    a, button {
        cursor: none !important;
    }

    /* Asegurar que el cursor se vea bien sobre fondos oscuros */
    #cursor-follower {
        filter: blur(1px);
    }
</style>