---
/**
 * TextureOverlay.astro
 * Este componente añade una capa global de ruido/grano.
 * Asegúrate de tener una imagen de textura pequeña (ej. 100x100px) en /public/images/texture.png
 */
---

<div class="texture-wrap">
    <div class="texture-image"></div>
</div>

<style>
    .texture-wrap {
        /* Se mantiene por encima de todo pero sin bloquear clics */
        pointer-events: none;
        z-index: 9999; 
        position: fixed;
        inset: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
    }

    .texture-image {
        width: 200%; /* Más grande que el viewport para permitir movimiento */
        height: 200%;
        position: absolute;
        top: -50%;
        left: -50%;
        background-image: url('/images/texture.png'); /* Ruta a tu textura */
        background-repeat: repeat;
        background-size: 150px; /* Ajusta según el grano que desees */
        opacity: 0.04; /* Opacidad sutil para look premium de Vantta */
        
        /* Animación de grano analógico */
        animation: grain-animation 0.8s steps(10) infinite;
        will-change: transform;
    }

    @keyframes grain-animation {
        0%, 100% { transform: translate(0, 0); }
        10% { transform: translate(-5%, -5%); }
        20% { transform: translate(-10%, 5%); }
        30% { transform: translate(5%, -10%); }
        40% { transform: translate(-5%, 15%); }
        50% { transform: translate(-10%, 5%); }
        60% { transform: translate(15%, 0); }
        70% { transform: translate(0, 10%); }
        80% { transform: translate(-15%, 0); }
        90% { transform: translate(10%, 5%); }
    }

    /* Reducir movimiento si el usuario prefiere movimiento reducido */
    @media (prefers-reduced-motion: reduce) {
        .texture-image {
            animation: none;
            opacity: 0.03;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }
    }
</style>