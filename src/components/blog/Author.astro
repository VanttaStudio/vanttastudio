---
import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";
import Title from "@components/global/Title.astro";
import { getLangFromUrl, useTranslations, useTranslatedPath } from "@i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const translatePath = useTranslatedPath(lang);

const { author } = Astro.props;
---

<section class="bg-zinc-950 text-white min-h-screen">
    <div class="mx-auto px-8 py-24 md:px-12 lg:pt-32 2xl:max-w-7xl">
        
        <div class="flex flex-col gap-12 lg:flex-row lg:items-end lg:justify-between border-b border-zinc-800 pb-16">
            <div class="max-w-4xl">
                <span class="font-mono text-xs uppercase tracking-[0.4em] text-lime-400 mb-4 block">
                    {author.data.role || "Creative Talent"}
                </span>
                <Title 
                    title={author.data.name} 
                    subtitle="Perfil del autor" 
                    class="uppercase font-black tracking-tighter text-6xl md:text-8xl lg:text-9xl mb-8" 
                />
                
                {author.data.bio && (
                    <p class="font-display text-xl leading-relaxed text-zinc-400 md:text-2xl max-w-2xl">
                        {author.data.bio}
                    </p>
                )}
            </div>

            <div class="flex flex-col items-center lg:items-end gap-6">
                <div class="relative h-48 w-48 overflow-hidden rounded-2xl border border-zinc-800 bg-zinc-900 shadow-2xl">
                    {author.data.avatar ? (
                        <Image 
                            src={author.data.avatar} 
                            alt={author.data.name}
                            width={400}
                            height={400}
                            class="h-full w-full object-cover grayscale hover:grayscale-0 transition-all duration-700"
                        />
                    ) : (
                        <div class="flex h-full w-full items-center justify-center text-6xl font-black text-zinc-800 uppercase">
                            {author.data.name.charAt(0)}
                        </div>
                    )}
                </div>

                <div class="flex gap-4">
                    {author.data.twitter && (
                        <a href={author.data.twitter} class="p-3 rounded-full border border-zinc-800 text-zinc-400 hover:text-white hover:border-lime-400 transition-all" data-cursor-hover>
                            <Icon name="ri:twitter-x-fill" width="20" />
                        </a>
                    )}
                    {author.data.linkedin && (
                        <a href={author.data.linkedin} class="p-3 rounded-full border border-zinc-800 text-zinc-400 hover:text-white hover:border-lime-400 transition-all" data-cursor-hover>
                            <Icon name="ri:linkedin-fill" width="20" />
                        </a>
                    )}
                    {author.data.github && (
                        <a href={author.data.github} class="p-3 rounded-full border border-zinc-800 text-zinc-400 hover:text-white hover:border-lime-400 transition-all" data-cursor-hover>
                            <Icon name="ri:github-fill" width="20" />
                        </a>
                    )}
                </div>
            </div>
        </div>

        <div class="mt-24">
             <div class="flex items-center gap-4 mb-12">
                <h2 class="font-display text-2xl font-bold uppercase tracking-tighter">Publicaciones Recientes</h2>
                <div class="h-px flex-1 bg-zinc-800"></div>
            </div>
            
            <slot /> 
        </div>

    </div>
</section>

<style>
    /* Soporte para tipografía personalizada */
    .font-display {
        font-family: var(--font-display, 'Inter', sans-serif);
    }

    /* Animación de entrada para los elementos */
    section {
        animation: fadeIn 0.8s ease-out forwards;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
</style>